# 基本配置

`webpack`有几个核心概念：



## 入口([entry](https://webpack.docschina.org/concepts/entry-points))

指`webpack`应使用哪个模块开始打包构建。

### 单个入口（简写）语法

用法：`entry: string | [string]`

```javascript
module.exports = {
  entry: './path/to/my/entry/file.js',
};
```

也可以将一个文件路径数组传递给 `entry` 属性

```javascript
module.exports = {
  entry: ['./src/file_1.js', './src/file_2.js'],
  output: {
    filename: 'bundle.js',
  },
};
```

当你希望通过一个入口为应用程序快速设置 webpack 配置时，单一入口的语法方式是不错的选择。然而，使用这种语法方式来扩展或调整配置<b><font color="red">缺少灵活性</font></b>。

### 对象语法

用法：`entry:{ <entryChunkName>: stirng | [string] } | {}`

```javascript
module.exports = {
  entry: {
    app: './src/app.js',
    adminApp: './src/adminApp.js',
  },
};
```

对象语法会比较繁琐。然而，它的优点是扩展性很强。

### 描述入口的对象

描述入口的对象有如下属性：

* `dependOn`：当前入口所以来的入口，它们会在该入口被加载前加载，注意`dependOn`不能循环引用入口文件
* `filename`：指定要输出的文件名称
* `import`：指定启动时需要加载的模块
* `library`：指定library选项为当前entry构建一个library
* `runtime`：运行时chunk的名字，如果设置了此属性则会创建一个新的运行时chunk，对于同一个入口文件，`runtime`和`dependOn`不能用时存在，同时`runtime`不能指向已存在的入口名称
* `publicPath`：当改入口的输出文件在浏览器中被引用时，为它们指定一个公共URL地址



## 输出([output](https://webpack.docschina.org/concepts/output))

告诉`webpack`在哪里输出它打包的bundle以及如何命名这些文件。

### 用法

将`bundle.js`文件输出到`dist`目录中：

```javascript
module.exports = {
  output: {
    filename: 'bundle.js',
  },
};
```

多入口起点：

如果配置中使用了多个入口或`CommonChunkPlugin`这样的插件，应该使用[占位符(substitutions)](https://webpack.docschina.org/configuration/output#output-filename) 来确保每个输出文件有唯一名称：

```javascript
module.exports = {
  entry: {
    app: './src/app.js',
    adminApp: './src/adminApp.js',
  },
  output: {
    filename: '[name].js',
    path: __dirname + '/dist',
  },
};

// webpack将输出两个打包后的文件：./dist/app.js, ./dist/adminApp.js
```

### 高级用法

对资源使用`CDN`和`hash`：

```javascript
module.exports = {
  //...
  output: {
    path: '/home/proj/cdn/assets/[fullhash]',
    publicPath: 'https://cdn.example.com/assets/[fullhash]/',
  },
};
```



## 加载器([loader](https://webpack.docschina.org/concepts/loaders))

loader用于对模块的源代码进行转换，由于`webpack`自身只能理解`JS`以及`JSON`文件，通过配置`loader`能让`webpack`处理其他类型的文件（CSS/图片...）。

`loader`有两个属性：

* `test`：指定哪些类型文件会被loader转换处理；
* `use`：指定在处理这些文件时应该使用哪些loader。

### 使用loader

两种使用方式：

* [配置方式](https://webpack.docschina.org/concepts/loaders#configuration)（推荐）：在`webpack.config.js`中指定loader；
* [内联方式](https://webpack.docschina.org/concepts/loaders#inline)（很少使用）：在每个import语句中显式指定loader。

注意：loader 从右到左（或从下到上）地执行。

```javascript
module.exports = {
  ...
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          { loader: 'style-loader' },
          {
            loader: 'css-loader',
            options: {
              modules: true
            }
          },
          { loader: 'sass-loader' }
        ]
      }
    ]
  }
};
```

在上边的代码中loader的执行顺序依次是：`sass-loader` ，`css-loader`，最后是`style-loader`。



## 插件([plugins](https://webpack.docschina.org/concepts/plugins))

插件能够让webpack执行更复杂的任务，包括：打包优化、资源管理、环境变量注入等，插件是webpack最重要的功能，从另一方面来讲插件的存在也是为了解决`loader`无法解决的问题。



## 模式([mode](https://webpack.docschina.org/configuration/mode))

模式有三种：`development`, `production`以及`none`，一般使用前两种。



## 浏览器兼容性(browser compatibility)

webpack支持所有符合[ES5标准](https://kangax.github.io/compat-table/es5/)的浏览器。



## 环境(environment)

webpack5支持运行于`Node.js v10.13.0+`的版本，所以采用`Common.js`模块规范化。
